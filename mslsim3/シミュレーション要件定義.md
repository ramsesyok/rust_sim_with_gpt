# 役割
Rustの関数型プログラミングに精通したプログラマとして、C/C++からRustの導入を検討している会社へのコンサルタントとして、ふるまってください。

# 目的
- Rustプログラムの数値演算プログラムにおける適用可能性を調査することが目的です。
- 複雑な物理現象の再現は不要ですが、十分な量の複雑な数値演算を含むことが必要です。

- シミュレーションの要件定義をもとに、ソフトウェアの要求仕様書をまとめてください。
- 要求仕様書には、すべて演算処理に数式をきちんと記載し、実装にミスが起きないようにすること。

#  要件定義
## 全般
1. XYZ空間での演算を行うこと。 Z軸は鉛直方向上固定、右手系（X軸東、Y軸北）
2. 演算サイクルは、変数dt (s)として置き、デフォルトは、0.1sとすること。
3. このシミュレーションには、３つの演算モデルが登場する。
   - 中距離弾道ミサイル
   - 中距離弾道ミサイルの探知用レーダ
   - 迎撃ミサイル
4. これらの演算モデルは、シナリオによって、複数個出現すること。
   - 演算モデルがシミュレーション上に登場した際のインスタンスを「オブジェクト」と呼ぶ。
5. いずれのミサイルも姿勢角演算においてロールの影響はないものとして簡易化すること。
   - ただし、変数上ロールも考慮するが、常にゼロとすること。

## 演算全般
1. 必要に応じて、ローパスフィルタを用いて振動を防いでください。
### 運動演算
 運動演算は、原則以下のステップで行われる。
 1. 推力算出
 2. 加速度算出
 3. 速度算出
 4. 位置計算
 5. 姿勢計算

 ### 汎用演算
- 汎用演算は、一つのモジュールにまとめること。
- 積分法は、Adams-Bashforth法（2段法）を用いること。
   - $ (\frac{dy}{dx} = f(x)), (y(a) = 0) $ として ODE を解くこと。
- atan2において、入力がゼロのときはエラーを検出できる共通処理を作成すること。
  - ゼロ判定は、単純比較でなく、許容誤差以下であることを判定条件とすること。

## 演算モデル
### 中距離弾道ミサイル
1. 演算期間は、発射から地表（z=0）に到達するか、迎撃ミサイルによって、迎撃されるまで計算を行こと。
2. 大気密度による影響を考慮にいれること。
3. 燃料減少による重量変化を考慮にいれること。

### 中距離弾道ミサイルの探知用レーダ
1. レーダは方位角・仰角および探知距離を性能諸元として持つこと。
2. 探知周期は、0.1sとすること。
3. レーダの探知距離内に中距離弾道ミサイルが入ったら、迎撃ミサイルへの発射指示を出すこと。
4. 探知している間、迎撃ミサイルに位置を通知すること。

### 迎撃ミサイル
1. 中距離弾道ミサイルを迎撃するか、地表に(z=0)に到達するまで演算すること。
2. レーダから受信した弾道ミサイルの位置への誘導は比例航法を用いること。
3. 運動演算は、中距離弾道ミサイルと同等とする。

------



